var test = require('tap').test,
    armory = require('armory').defaults({ region: 'us', fallback: false }),
    wowhead = require('../');

test('melee, agi, hr', function(t) {
    wowhead(27903, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(27903, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.similar(item.weaponInfo, armoryItem.weaponInfo);
            t.end();
        });
    });
});

test('ranged, dodge', function(t) {
    wowhead(32325, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(32325, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.similar(item.weaponInfo, armoryItem.weaponInfo);
            t.end();
        });
    });
});

test('str, parry', function(t) {
    wowhead(28747, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(28747, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

test('int, pen, crit', function(t) {
    wowhead(29320, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(29320, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

test('spi, sp', function(t) {
    wowhead(30012, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(30012, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.similar(item.weaponInfo, armoryItem.weaponInfo);
            t.end();
        });
    });
});

test('resil, mastery', function(t) {
    wowhead(56546, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(56546, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

test('exp, haste', function(t) {
    wowhead(34561, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(34561, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

test('ap', function(t) {
    wowhead(21793, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(21793, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

test('resist', function(t) {
    wowhead(28301, function(err, item) {
        t.error(err);
        t.ok(item);

        armory.item(28301, function(err, armoryItem) {
            t.error(err);
            t.ok(armoryItem);

            t.similar(item.bonusStats, armoryItem.bonusStats);
            t.end();
        });
    });
});

